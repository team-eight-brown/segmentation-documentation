## Функциональные и нефункциональные требования

### 1. Функциональные требования

1. **Создание сегментов**
    - Возможность создания новых сегментов через API.

2. **Удаление сегментов**
    - Возможность удаления существующих сегментов через API.

3. **Редактирование сегментов**
    - Изменение названия сегмента или его метаданных через API.

4. **Добавление пользователя в сегменты**
    - Возможность добавления пользователей в конкретные сегменты через API.

5. **Удаление пользователя из сегментов**
    - Удаление связи пользователя с сегментами через API.

6. **Случайное распределение пользователей по сегментам**
    - Функционал для случайного распределения определённого сегмента по проценту пользователей, находящихся в БД. Например, распределение сегмента BLUE_DESIGN на 30% пользователей.

7. **Получение сегментов пользователя**
    - API для получения списка сегментов, в которые включён пользователь по его `user_id`.

8. **Хранение данных пользователей и сегментов**
    - Система должна поддерживать надёжное хранение данных с возможностью масштабирования по мере увеличения объёма данных.

9. **Фильтрация пользователей для сегментации**
    - Возможность фильтрации пользователей при проставлении сегментов с использованием регулярных выражений для логина, адреса электронной почты или IP-адреса.

10. **Web-интерфейс для аналитиков**
    - Доступ к интерфейсу для работы с сегментами и авторизации пользователей, где аналитики смогут просматривать данные, применять фильтры и получать отчёты.
    - Авторизация и регистрация пользователей будет проводиться при помощи web-интерфейса

11. **Ролевая модель**
    - Система должна поддерживать ролевую модель для управления правами доступа и привилегиями пользователей.

##### Основные роли:

- **Администратор (Admin)**
    - Полный доступ ко всем функциям системы:
        - Создание, редактирование и удаление сегментов.
        - Управление пользователями (добавление и удаление из сегментов).
        - Мониторинг системы и просмотр логов.
        - Настройка прав доступа для других ролей.

- **Аналитик (Analyst)**
    - Доступ на чтение данных о пользователях и сегментах:
        - Использование API для аналитики и отчётности.
        - Нет прав на изменение/создание/удаление сегментов, добавление/удаление пользователей из сегментов.


##### Ролевая модель V2:

Каждый следующий уровень содержит возможности предыдущего. Права доступа распределены по функциональным возможностям системы.

- Работа с сегментами:
    - Нет доступа
    - Просмотр 
    - Редактирование
    - Добавление
    - Удаление

- Работа с клиентами:
    - Нет доступа
    - Просмотр
    - Редактирование
    - Добавление
    - Удаление

- Выдача прав пользователям для работы с API:
    - Нет доступа
    - Есть доступ

- Мониторинг системы:
    - Нет доступа
    - Есть доступ

- Распределение сегментов по пользователям возможно только если выданы следующие права: 
    - Работа с сегментами: просмотр
    - Работа с клиентами: редактирование

### 2. Нефункциональные требования:

1. **Производительность:**
    - Время отклика API не должно превышать 1000 мс на операции добавления, удаления или получения сегментов.

2. **Масштабируемость:**
    - Сервис должен быть масштабируемым, чтобы справляться с увеличением нагрузки.

3. **Надёжность:**
    - Система должна быть отказоустойчивой, с возможностью восстановления после сбоев.
    - Данные пользователей должны сохраняться корректно, даже при возникновении ошибок или отказах компонентов.

4. **Безопасность:**
    - Необходима аутентификация и авторизация при доступе к API.
    - Реализация ролевой модели с чётким разграничением прав доступа.
    - Защита данных пользователей от несанкционированного доступа.

5. **Удобство использования API:**
    - API должно быть интуитивно понятным и документированным, поддерживать стандарты REST API

6. **Требования к технологическому стеку**
    - Java, react.js, postgreSQL
    - Желательно использование контейнеризации (например, Docker Compose или Kubernetes) для упрощения развёртывания и управления зависимостями.

7. **Структура базы данных**
    - БД должна быть структурирована с учётом требований к фильтрации и эффективному хранению большого объёма данных о сегментах и пользователях (Redis, Postgres)
---
